@page "/controlcenter"
<table class="live">
    <tr>
        <td style="text-align:left;" colspan="2">
        </td>
        <th colspan="@this._dto.Judges.Count()" style="text-align:center;" class="teilnehmer">
            &#8470; @this._dto.Pilot.Id - @this._dto.Pilot.Name<br>Round @this._dto.Round.Id @this._dto.Round.Program
        </th>
    </tr>

    <tr class="header">
        <th>#</th>
        <th>Manoeuvre</th>
        <th>K</th>
        @foreach (var judge in this._dto.Judges)
        {
            <th class="jugdes">Judge @judge.Id</th>
        }
    </tr>
    @foreach (var maneouvre in this._dto.ManeouvreLst.FirstOrDefault().Value.OrderBy(o => o.Id))
    {
        <tr class="@(maneouvre.Id % 2 ==0? "gerade " : "")">
            <td>@maneouvre.Id.ToString("D2")</td>
            <td class="figur">@maneouvre.Name</td>
            <td align='center'>@maneouvre.Value</td>
            @foreach (var judge in this._dto.Judges.OrderBy(o => o.Id))
            {
                var score = this._dto.ManeouvreLst[judge.Id].FirstOrDefault(x => x.Id == maneouvre.Id).Score;
                var kValue = this._dto.ManeouvreLst[judge.Id].FirstOrDefault(x => x.Id == maneouvre.Id).Value;
                <td align='center'>@(score.HasValue ? $"{(kValue * score.Value)} ({score})" : " ")</td>
            }
        </tr>
    }
    <tr>
        <td colspan="3"></td>
        @foreach (var judge in this._dto.Judges.OrderBy(o => o.Id))
        {
            <td colspan="2">@this._dto.ManeouvreLst[judge.Id].Select(s => s.Value * (s.Score ?? 0)).Sum()</td>
        }
       
    </tr>
</table>
